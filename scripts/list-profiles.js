const {Pool}=require('pg');const fs=require('fs');const p=fs.readFileSync('.env.local','utf8');p.split('\n').forEach(l=>{const m=l.match(/^([^=]+)=(.*)$/);if(m&&!process.env[m[1].trim()])process.env[m[1].trim()]=m[2].trim()});const pool=new Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:false}});pool.query('SELECT email, total_emails, avg_sentiment FROM constituent_profiles ORDER BY total_emails DESC LIMIT 10').then(r=>{console.log('\nðŸ“Š Top 10 Profiles Created:\n');r.rows.forEach((p,i)=>{const sent=p.avg_sentiment?Math.round((p.avg_sentiment+1)*50)+'%':'N/A';console.log((i+1)+'. '+p.email.slice(0,50)+' - '+p.total_emails+' emails (sentiment: '+sent+')')});pool.end()})
